(self.webpackChunksrs_ui=self.webpackChunksrs_ui||[]).push([[456],{41768:()=>{},9019:(e,t,s)=>{"use strict";s(85893),s(73685),s(54648),s(90154)},53002:(e,t,s)=>{"use strict";s(85893),s(90154),s(54648),s(49093)},47615:(e,t,s)=>{"use strict";var i=s(85893),n=s(93264);s(73685),s(90154),s(54648),s(95798),s(97644),s(9019),s(53002);const r=(0,n.memo)((({renderSchema:e,registry:t})=>e&&t&&e(t)||(0,i.jsx)(i.Fragment,{})));r.displayName="Schemas"},28354:(e,t,s)=>{"use strict";s(85893),s(47615)},4037:(e,t,s)=>{"use strict";s.r(t);var i=s(85893),n=s(93264),r=s(3644),a=s.n(r),o=s(97582),l=s(73685),c=(s(41768),s(90154)),d=s(7878),u=s(31973),v=s(54648),g=s(95798),h=s(97644),j=s(87807),p=s(180),m=s(72901);var x=s(18377),b=s(67822);const f=()=>{const{t:e}=(0,v.useTranslation)(["service-registry"]),t=(0,h.useAuth)(),{srs:{apiBasePath:s}}=(0,h.useConfig)()||{srs:{apiBasePath:""}},{showModal:r}=(0,p.dd)(),{showModal:a}=(0,p.dd)(),{preCreateInstance:l,shouldOpenCreateModal:d,renderDownloadArtifacts:u}=(0,b.x)()||{},{page:f=1,perPage:y=10}=(0,p.h0)()||{},[_,C]=(0,n.useState)(!1),[S,k]=(0,n.useState)(void 0),[O,w]=(0,n.useState)(void 0),[P,R]=(0,n.useState)(void 0),[T,A]=(0,n.useState)(void 0),[E,N]=(0,n.useState)("name asc"),M=null==P?void 0:P.some((e=>(null==e?void 0:e.instance_type)===(null===x.ik||void 0===x.ik?void 0:x.ik.eval)&&e.owner===T)),D=(0,n.useCallback)((()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const e=yield null==t?void 0:t.srs.getToken();if(s&&e){const t=new g.RegistriesApi(new g.Configuration({accessToken:e,basePath:s}));yield t.getRegistries(f,y).then((e=>{const t=null==e?void 0:e.data;w(t),R(null==t?void 0:t.items)}))}}))),[f,y,s,null==t?void 0:t.srs]),I=(0,n.useCallback)((()=>{if(P&&(null==P?void 0:P.length)>0){const e=null==P?void 0:P.filter((e=>(null==e?void 0:e.id)===(null==S?void 0:S.id)))[0],t=Object.assign(Object.assign({},S),e);e&&k(t)}}),[P,S]),B=(0,n.useCallback)((()=>{r(p.w8.CreateServiceRegistry,{fetchServiceRegistries:D,hasUserTrialInstance:M})}),[D,M,r]);(0,n.useEffect)((()=>{D()}),[D]),(0,n.useEffect)((()=>{var e;null===(e=null==t?void 0:t.getUsername())||void 0===e||e.then((e=>A(e)))}),[t]),(0,n.useEffect)((()=>{I()}),[I]),(0,n.useEffect)((()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){d&&(yield d())&&B()}))}),[d,B]),(0,n.useEffect)((()=>{D()}),[f,y,D]),(0,m.Yz)((()=>D()),5e3);const U=(0,n.useCallback)((e=>{C(!0),k(e)}),[]),F=(0,n.useCallback)((()=>{C(!1)}),[]),L=(0,n.useCallback)((t=>{const{status:s}=t||{};a(p.w8.DeleteServiceRegistry,{status:s,registry:t,fetchServiceRegistries:D,confirmButtonProps:{label:e("common:delete")},renderDownloadArtifacts:u})}),[D,u,a,e]),$=(0,n.useCallback)((()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){let e;l&&(e=yield l(!0)),e&&B()}))),[l,B]);switch(!0){case void 0===P:return(0,i.jsx)(c.PageSection,Object.assign({variant:c.PageSectionVariants.light,padding:{default:"noPadding"}},{children:(0,i.jsx)(p.yR,{})}));case!(null==P?void 0:P.length):return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.mt,{}),(0,i.jsx)(j.EG,{onCreateserviceRegistry:$})]});default:return(0,i.jsx)(j.OP,Object.assign({isExpanded:_,isLoading:void 0===S,onClose:F,registry:S},{children:(0,i.jsxs)("main",Object.assign({className:"pf-c-page__main"},{children:[(0,i.jsx)(j.mt,{onConnectToRegistry:U,onDeleteRegistry:L,serviceRegistryDetails:S}),(0,i.jsx)(j.UW,{page:f,perPage:y,serviceRegistryItems:P||[],total:null==O?void 0:O.total,onViewConnection:U,onDelete:L,expectedTotal:0,orderBy:E,setOrderBy:N,loggedInUser:T,currentUserRegistries:P,handleCreateModal:$,refresh:D,registryDataLoaded:!1,isDrawerOpen:_})]}))}))}},y=[{component:()=>(0,i.jsx)(f,{}),exact:!0,label:"Service Registry",path:"/",title:"Service Registry"}],_=e=>{var{component:t,title:s}=e,n=(0,o.__rest)(e,["component","title"]);return(0,u.j)(s),(0,i.jsx)(l.Route,Object.assign({render:function(e){return(0,i.jsx)(t,Object.assign({},n,e))}},n))},C=({title:e})=>((0,u.j)(e),(0,i.jsx)(l.Route,{component:d.o})),S=y.reduce(((e,t)=>[...e,...t.routes?t.routes:[t]]),[]),k=()=>(0,i.jsxs)(l.Switch,{children:[S.map(((e,t)=>{var{path:s,exact:n,component:r,title:a,isAsync:l}=e,c=(0,o.__rest)(e,["path","exact","component","title","isAsync"]);return(0,i.jsx)(_,Object.assign({path:s,exact:n,component:r,title:a,isAsync:l},c),t)})),(0,i.jsx)(C,{title:"404 Page Not Found"})]}),O=s.p+"f940137c.svg",w=({children:e})=>{const[t,s]=(0,n.useState)(!0),[r,a]=(0,n.useState)(!0),[o,d]=(0,n.useState)(!1);const u=(0,i.jsx)(c.PageHeader,{logo:(0,i.jsx)((function(){const e=(0,l.useHistory)();return(0,i.jsx)("img",{src:O,onClick:function(){e.push("/")},alt:"PatternFly Logo"})}),{}),showNavToggle:!0,isNavOpen:t,onNavToggle:r?()=>{d(!o)}:()=>{s(!t)}}),v=(0,l.useLocation)(),g=(e,t)=>(0,i.jsx)(c.NavItem,Object.assign({id:`${e.label}-${t}`},{children:(0,i.jsx)(l.NavLink,Object.assign({exact:e.exact,to:e.path,activeClassName:"pf-m-current"},{children:e.label}))}),`${e.label}-${t}`),h=(0,i.jsx)(c.Nav,Object.assign({id:"nav-primary-simple",theme:"dark"},{children:(0,i.jsx)(c.NavList,Object.assign({id:"nav-list-simple"},{children:y.map(((e,t)=>{return e.label&&(e.routes?(s=e,n=t,(0,i.jsx)(c.NavExpandable,Object.assign({id:`${s.label}-${n}`,title:s.label,isActive:s.routes.some((e=>e.path===v.pathname))},{children:s.routes.map(((e,t)=>e.label&&g(e,t)))}),`${s.label}-${n}`)):g(e,t));var s,n}))}))})),j=(0,i.jsx)(c.PageSidebar,{theme:"dark",nav:h,isNavOpen:r?o:t}),p="primary-app-container",m=(0,i.jsx)(c.SkipToContent,Object.assign({onClick:e=>{e.preventDefault();const t=document.getElementById(p);t&&t.focus()},href:`#${p}`},{children:"Skip to Content"}));return(0,i.jsx)(c.Page,Object.assign({mainContainerId:p,header:u,sidebar:j,onPageResize:e=>{a(e.mobileView)},skipToContent:m},{children:e}))};var P=s(45434),R=s.n(P);let T;const A=()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){return T||(yield E()),T})),E=()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{T=R()(),T&&(yield T.init({onLoad:"login-required"}))}catch(e){T=void 0,console.warn("Auth: Unable to initialize keycloak. Client side will not be configured to use authentication")}})),N=()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){return yield null==T?void 0:T.updateToken(50),(null==T?void 0:T.token)?T.token:(console.error("No keycloak token available"),"foo")})),M=()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){return yield null==T?void 0:T.updateToken(50),(null==T?void 0:T.tokenParsed)?T.tokenParsed:(console.error("No keycloak token available"),{})})),D=(0,n.createContext)({keycloak:void 0}),I=({children:e})=>{const t={srs:{getToken:N},getUsername:()=>M().then((e=>e.username)),isOrgAdmin:()=>M().then((e=>e.is_org_admin))};return(0,i.jsx)(h.AuthContext.Provider,Object.assign({value:t},{children:e}))};var B=s(53215);let U;const F=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){U=yield A(),t(!0)}))}),[]),e?(0,i.jsx)(h.ConfigContext.Provider,Object.assign({value:{srs:{apiBasePath:__BASE_PATH__}}},{children:(0,i.jsx)(h.QuotaContext.Provider,Object.assign({value:{getQuota:()=>Promise.resolve({data:new Map,loading:!1,isServiceDown:!1})}},{children:(0,i.jsx)(b.w.Provider,Object.assign({value:{preCreateInstance:()=>Promise.resolve(!0)}},{children:(0,i.jsx)(h.BasenameContext.Provider,Object.assign({value:{getBasename:()=>""}},{children:(0,i.jsx)(B.I18nProvider,Object.assign({lng:"en",resources:{en:{common:()=>s.e(389).then(s.t.bind(s,3389,19)),"service-registry":()=>s.e(767).then(s.t.bind(s,14767,19))}}},{children:(0,i.jsx)(p.uZ,{children:(0,i.jsx)(D.Provider,Object.assign({value:{keycloak:U,profile:null==U?void 0:U.profile}},{children:(0,i.jsx)(I,{children:(0,i.jsx)(l.BrowserRouter,{children:(0,i.jsx)(n.Suspense,Object.assign({fallback:(0,i.jsx)(p.yR,{})},{children:(0,i.jsx)(p.tV,{children:(0,i.jsx)(p.bN,{children:(0,i.jsx)(B.ModalProvider,{children:(0,i.jsxs)(p.DY,{children:[(0,i.jsx)(w,{children:(0,i.jsx)(k,{})}),(0,i.jsx)(p.r3,{})]})})})})}))})})}))})}))}))}))}))})):(0,i.jsx)(p.yR,{})};a().render((0,i.jsx)(F,{}),document.getElementById("root"))},7878:(e,t,s)=>{"use strict";s.d(t,{o:()=>l});var i=s(85893),n=s(54648),r=s(90154),a=s(73685),o=s(180);const l=()=>{const{t:e}=(0,n.useTranslation)();return(0,i.jsx)(r.PageSection,Object.assign({padding:{default:"noPadding"},isFilled:!0},{children:(0,i.jsx)(o.C0,Object.assign({emptyStateProps:{variant:o.jU.PageNotFound},titleProps:{title:e("404_page_does_not_exist")},emptyStateBodyProps:{body:e("we_cannot_find_the_page_you_are_looking_for")}},{children:(0,i.jsx)((function(){const t=(0,a.useHistory)();return(0,i.jsx)(r.Button,Object.assign({onClick:function(){t.push("/")}},{children:e("return_to_home_page")}))}),{})}))}))}},91635:(e,t,s)=>{"use strict";s.d(t,{D:()=>d,t:()=>c});var i=s(85893),n=s(93264),r=s(90154),a=s(53215);const o=({variant:e,hideModal:t,title:s})=>(0,i.jsx)(r.Modal,{id:"fallback-modal",variant:e,isOpen:!0,"aria-label":"fallback modal",showClose:!0,"aria-describedby":"modal-message",onClose:t,title:s,children:(0,i.jsx)(a.Loading,{bullseyeProps:{className:"pf-u-p-xl"}})}),l=({activeModal:e,hideModal:t,modalRegistry:s})=>{if(void 0===e)return(0,i.jsx)(i.Fragment,{});const r=s.current[e.modalType],a=r.lazyComponent;return(0,i.jsx)(n.Suspense,Object.assign({fallback:(0,i.jsx)(o,{hideModal:t,variant:r.variant,title:r.title})},{children:(0,i.jsx)(a,Object.assign({hideModal:t,title:r.title,variant:r.variant},e.modalProps))}))},c=(0,n.createContext)(void 0),d=({children:e})=>{const[t,s]=(0,n.useState)(),r=(0,n.useRef)({}),a={registerModals:e=>{r.current=Object.assign(Object.assign({},r),e)},hideModal:()=>{s(void 0)},showModal:(e,t)=>{s({modalType:e,modalProps:t})}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l,{activeModal:t,hideModal:a.hideModal,modalRegistry:r}),(0,i.jsx)(c.Provider,Object.assign({value:a},{children:e}))]})}},22931:(e,t,s)=>{"use strict";var i;s.d(t,{w:()=>i}),function(e){e.CreateServiceRegistry="CreateServiceRegistry",e.DeleteServiceRegistry="DeleteServiceRegistry"}(i||(i={}))},90806:(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var i=s(93264),n=s(91635);const r=()=>{const e=(0,i.useContext)(n.t);if(void 0===e)throw new Error("not inside modal provider");return e}},180:(e,t,s)=>{"use strict";s.d(t,{uZ:()=>a,sw:()=>c,a$:()=>y.a,AX:()=>d.A,D5:()=>m.D,C0:()=>u.C,jU:()=>u.j,tV:()=>j,yR:()=>p.y,wu:()=>x.wu,wR:()=>b.w,L5:()=>f.L,DY:()=>_.DY,w8:()=>_.w8,bN:()=>x.bN,r3:()=>_.r3,dd:()=>_.dd,h0:()=>x.h0});var i=s(85893),n=s(93264),r=s(97644);const a=({children:e})=>{const[t,s]=(0,n.useState)([]),[a,o]=(0,n.useState)([]);(0,n.useEffect)((()=>{const e=a.map((e=>e.key)),s=t.filter((t=>!e.includes(null==t?void 0:t.id))).map((e=>{const{id:t=""}=e,s=setTimeout((()=>l(t)),8e3);return{key:e.id,timeOut:s}}));return o([...a,...s]),()=>a.forEach((e=>(null==e?void 0:e.timeOut)&&clearTimeout(e.timeOut)))}),[t,a]);const l=e=>{s((t=>[...t.filter((t=>t.id!==e))])),o((t=>[...t.filter((t=>t.key===e))]))};return(0,i.jsxs)(r.AlertContext.Provider,Object.assign({value:{addAlert:e=>{const i=(new Date).getTime().toString();s([...t,Object.assign(Object.assign({},e),{id:i})])}}},{children:[(0,i.jsx)(c,{alerts:t,onCloseAlert:l}),e]}))};var o=s(97582),l=s(90154);const c=({alerts:e,onCloseAlert:t})=>(0,i.jsx)(l.AlertGroup,Object.assign({isToast:!0},{children:e.map((e=>{var{id:s,variant:n,title:r,description:a,dataTestId:c}=e,d=(0,o.__rest)(e,["id","variant","title","description","dataTestId"]);return(0,i.jsx)(l.Alert,Object.assign({isLiveRegion:!0,variant:l.AlertVariant[n],variantLabel:"",title:r,actionClose:(0,i.jsx)(l.AlertActionCloseButton,{title:r,onClose:()=>t(s)}),"data-testid":c},d,{children:a}),s)}))}));var d=s(5956),u=s(15825),v=s(73685),g=s(54648);s(62426);class h extends n.Component{constructor(){super(...arguments),this.state={hasError:!1},this.onClickButton=()=>{const{history:e}=this.props;this.setState({hasError:!1}),e&&e.push("/")}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("error:",e,t)}render(){const{t:e}=this.props,{hasError:t}=this.state;return t?(0,i.jsx)(l.PageSection,Object.assign({padding:{default:"noPadding"},isFilled:!0},{children:(0,i.jsx)(u.C,Object.assign({emptyStateProps:{variant:u.j.UnexpectedError},emptyStateIconProps:{className:"icon-color"},titleProps:{title:e("common:something_went_wrong")},emptyStateBodyProps:{body:e("unexpected_error")}},{children:(0,i.jsx)(l.Button,Object.assign({onClick:this.onClickButton},{children:e("common:go_to_kafka_instances")}))}))})):this.props.children}}const j=(0,v.withRouter)((0,g.withTranslation)()(h));var p=s(22336),m=s(78834),x=s(73251),b=s(76506),f=s(58883),y=(s(7878),s(93262)),_=s(45094)},11551:(e,t,s)=>{"use strict";s.d(t,{G:()=>i,S:()=>n});const i=e=>{var t;return void 0!==(null===(t=e.response)||void 0===t?void 0:t.data.code)};var n;!function(e){e.USER_ALREADY_HAVE_TRIAL_INSTANCE="SRS-MGMT-13",e.INSUFFICIENT_QUOTA="SRS-MGMT-14",e.INSUFFICIENT_STANDARD_QUOTA="SRS-MGMT-7",e.FAILED_TO_CHECK_QUOTA="SRS-MGMT-11"}(n||(n={}))},31973:(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var i=s(93264);function n(e){i.useEffect((()=>{const t=document.title;return document.title=e,()=>{document.title=t}}),[e])}}}]);
//# sourceMappingURL=456.005c014b.js.map