"use strict";(self.webpackChunksrs_ui=self.webpackChunksrs_ui||[]).push([[9685],{5634:(e,t,s)=>{t.Ws={name:"ArrowRightIcon",height:512,width:448,svgPath:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z",yOffset:0,xOffset:0},t.LZ=s(35183).createIcon(t.Ws),t.ZP=t.LZ},2112:(e,t,s)=>{t.MS={name:"WrenchIcon",height:512,width:512,svgPath:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z",yOffset:0,xOffset:0},t.R0=s(35183).createIcon(t.MS),t.R0},96007:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var i=s(85893),a=s(70655),n=s(93264),r=s(71236),o=s(28188),c=s(12096),l=s(50834),d=s(54422),u=s(180);var h=s(18377),v=s(67822);const g=()=>{const{t:e}=(0,r.useTranslation)(["service-registry"]),t=(0,l.useAuth)(),{srs:{apiBasePath:s}}=(0,l.useConfig)()||{srs:{apiBasePath:""}},{showModal:g}=(0,u.dd)(),{showModal:p}=(0,u.dd)(),{preCreateInstance:m,shouldOpenCreateModal:j,renderDownloadArtifacts:x}=(0,v.x)()||{},{page:y=1,perPage:f=10}=(0,u.h0)()||{},[S,b]=(0,n.useState)(!1),[C,_]=(0,n.useState)(void 0),[w,O]=(0,n.useState)(void 0),[R,T]=(0,n.useState)(void 0),[k,E]=(0,n.useState)(void 0),[M,A]=(0,n.useState)("name asc"),P=null==R?void 0:R.some((e=>(null==e?void 0:e.instance_type)===(null===h.ik||void 0===h.ik?void 0:h.ik.eval)&&e.owner===k)),I=(0,n.useCallback)((()=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){const e=yield null==t?void 0:t.srs.getToken();if(s&&e){const t=new c.RegistriesApi(new c.Configuration({accessToken:e,basePath:s}));yield t.getRegistries(y,f).then((e=>{const t=null==e?void 0:e.data;O(t),T(null==t?void 0:t.items)}))}}))),[y,f,s,null==t?void 0:t.srs]),D=(0,n.useCallback)((()=>{if(R&&(null==R?void 0:R.length)>0){const e=null==R?void 0:R.filter((e=>(null==e?void 0:e.id)===(null==C?void 0:C.id)))[0],t=Object.assign(Object.assign({},C),e);e&&_(t)}}),[R,C]),N=(0,n.useCallback)((()=>{g(u.w8.CreateServiceRegistry,{fetchServiceRegistries:I,hasUserTrialInstance:P})}),[I,P,g]);(0,n.useEffect)((()=>{I()}),[I]),(0,n.useEffect)((()=>{var e;null===(e=null==t?void 0:t.getUsername())||void 0===e||e.then((e=>E(e)))}),[t]),(0,n.useEffect)((()=>{D()}),[D]),(0,n.useEffect)((()=>{(0,a.__awaiter)(void 0,void 0,void 0,(function*(){j&&(yield j())&&N()}))}),[j,N]),(0,n.useEffect)((()=>{I()}),[y,f,I]),function(e,t){const s=(0,n.useRef)();(0,n.useEffect)((()=>{s.current=e}),[e]),(0,n.useEffect)((()=>{if(null!==t){const e=setInterval((function(){s.current&&s.current()}),t);return()=>{clearInterval(e)}}}),[t])}((()=>I()),5e3);const L=(0,n.useCallback)((e=>{b(!0),_(e)}),[]),U=(0,n.useCallback)((()=>{b(!1)}),[]),B=(0,n.useCallback)((t=>{const{status:s}=t||{};p(u.w8.DeleteServiceRegistry,{status:s,registry:t,fetchServiceRegistries:I,confirmButtonProps:{label:e("common:delete")},renderDownloadArtifacts:x})}),[I,x,p,e]),G=(0,n.useCallback)((()=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){let e;m&&(e=yield m(!0)),e&&N()}))),[m,N]);switch(!0){case void 0===R:return(0,i.jsx)(o.PageSection,Object.assign({variant:o.PageSectionVariants.light,padding:{default:"noPadding"}},{children:(0,i.jsx)(u.yR,{})}));case!(null==R?void 0:R.length):return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.mt,{}),(0,i.jsx)(d.EG,{onCreateserviceRegistry:G})]});default:return(0,i.jsx)(d.OP,Object.assign({isExpanded:S,isLoading:void 0===C,onClose:U,registry:C},{children:(0,i.jsxs)("main",Object.assign({className:"pf-c-page__main"},{children:[(0,i.jsx)(d.mt,{onConnectToRegistry:L,onDeleteRegistry:B,serviceRegistryDetails:C}),(0,i.jsx)(d.UW,{page:y,perPage:f,serviceRegistryItems:R||[],total:null==w?void 0:w.total,onViewConnection:L,onDelete:B,expectedTotal:0,orderBy:M,setOrderBy:A,loggedInUser:k,currentUserRegistries:R,handleCreateModal:G,refresh:I,registryDataLoaded:!1,isDrawerOpen:S})]}))}))}},p=({preCreateInstance:e,shouldOpenCreateModal:t,tokenEndPointUrl:s,renderDownloadArtifacts:a})=>(0,i.jsx)(v.w.Provider,Object.assign({value:{preCreateInstance:e,shouldOpenCreateModal:t,tokenEndPointUrl:s,renderDownloadArtifacts:a}},{children:(0,i.jsx)(u.bN,{children:(0,i.jsxs)(u.DY,{children:[(0,i.jsx)(g,{}),(0,i.jsx)(u.r3,{})]})})}))},9019:(e,t,s)=>{s.d(t,{u:()=>l});var i=s(85893),a=s(73685),n=s(71236),r=s(28188),o=s(2112),c=s(5634);const l=({topicName:e,basename:t})=>{const{t:s}=(0,n.useTranslation)("service-registry");return(0,i.jsxs)(r.EmptyState,Object.assign({className:"pf-u-pt-2xl pf-u-pt-3xl-on-md"},{children:[(0,i.jsx)(r.EmptyStateIcon,{icon:o.R0}),(0,i.jsx)(r.Title,Object.assign({headingLevel:"h2",size:"lg"},{children:s("empty_state_title")})),(0,i.jsx)(r.EmptyStateBody,{children:s("empty_state_body")}),(0,i.jsx)(r.EmptyStateSecondaryActions,{children:(0,i.jsx)(r.ClipboardCopy,Object.assign({isReadOnly:!0,hoverTip:"Copy",clickTip:"Copied",className:"pf-u-w-25"},{children:e+"-value"}))}),(0,i.jsx)(r.EmptyStateSecondaryActions,{children:(0,i.jsx)(r.ClipboardCopy,Object.assign({isReadOnly:!0,hoverTip:"Copy",clickTip:"Copied",className:"pf-u-w-25"},{children:e+"-key"}))}),(0,i.jsx)(r.EmptyStateSecondaryActions,{children:(0,i.jsxs)(a.Link,Object.assign({to:t},{children:[s("go_to_service_registry_instance_helper_text")," ",(0,i.jsx)(c.LZ,{})]}))})]}))}},53002:(e,t,s)=>{s.d(t,{g:()=>o});var i=s(85893),a=s(28188),n=s(71236),r=s(76814);const o=()=>{const{t:e}=(0,n.useTranslation)("service-registry");return(0,i.jsxs)(a.EmptyState,Object.assign({className:(0,r.css)("pf-u-pt-2xl pf-u-pt-3xl-on-md")},{children:[(0,i.jsx)(a.EmptyStateSecondaryActions,{children:(0,i.jsx)(a.Bullseye,{children:(0,i.jsx)(a.Spinner,{size:"xl"})})}),(0,i.jsx)(a.EmptyStateSecondaryActions,{children:(0,i.jsx)(a.TextContent,{children:(0,i.jsx)(a.Text,Object.assign({component:a.TextVariants.h1},{children:e("schema_loading")}))})})]}))}},47615:(e,t,s)=>{s.d(t,{G:()=>g});var i=s(70655),a=s(85893),n=s(93264),r=s(73685),o=s(28188),c=s(71236),l=s(12096),d=s(50834),u=s(9019),h=s(53002);const v=(0,n.memo)((({renderSchema:e,registry:t})=>e&&t&&e(t)||(0,a.jsx)(a.Fragment,{})));v.displayName="Schemas";const g=({renderSchema:e,basename:t,topicName:s})=>{const{t:g}=(0,c.useTranslation)("service-registry"),p=(0,d.useAuth)(),{srs:{apiBasePath:m}}=(0,d.useConfig)()||{srs:{apiBasePath:""}},[j,x]=(0,n.useState)(void 0),[y,f]=(0,n.useState)(),[S,b]=(0,n.useState)(!1),[C,_]=(0,n.useState)(),w=(0,n.useCallback)((()=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){let e=1;const t=100,s=yield null==p?void 0:p.srs.getToken(),a=new l.RegistriesApi(new l.Configuration({accessToken:s,basePath:m})),n=yield(0,i.__awaiter)(void 0,void 0,void 0,(function*(){const s=yield a.getRegistries(e,t);let{items:i}=null==s?void 0:s.data;const{total:n}=null==s?void 0:s.data;if(n>t){const s=Math.ceil(n/t);for(let n=1;n<s;n++){e+=1;const s=yield a.getRegistries(e,t);i=null==i?void 0:i.concat(null==s?void 0:s.data.items)}return i}return i}));x(n)}))),[null==p?void 0:p.srs,m]);(0,n.useEffect)((()=>{w()}),[w]),(0,n.useEffect)((()=>{const e=null==j?void 0:j.filter((e=>e.name===y))[0];_(e)}),[y,j]);const O=e=>{b(e)},R=(e,t)=>{null==e||e.preventDefault(),f(t),b(!1)},T=()=>{f(void 0)};return void 0===j?(0,a.jsx)(h.g,{}):(null==j?void 0:j.length)?(0,a.jsxs)(o.Stack,Object.assign({hasGutter:!0},{children:[(0,a.jsx)(o.StackItem,{children:(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardTitle,Object.assign({component:"h2"},{children:g("service_registry_instance")})),(0,a.jsx)(o.CardBody,{children:(0,a.jsxs)(o.Grid,Object.assign({hasGutter:!0,rowSpan:2},{children:[(0,a.jsxs)(o.GridItem,{children:[" ",(0,a.jsx)(o.Select,Object.assign({id:"registry-mapping-select",variant:o.SelectVariant.typeahead,typeAheadAriaLabel:g("select_instance"),placeholderText:g("select_instance"),onToggle:O,onSelect:R,selections:y,isOpen:S,width:600,onClear:T},{children:null==j?void 0:j.map((e=>(0,a.jsx)(o.SelectOption,{value:e.name},e.id)))}))]}),(0,a.jsx)(o.GridItem,{children:(0,a.jsx)(r.Link,Object.assign({to:t},{children:g("create_service_registry_helper_text")}))})]}))})]})}),(0,a.jsx)(o.StackItem,{children:(0,a.jsx)(v,{renderSchema:e,registry:C})})]})):(0,a.jsx)(u.u,{topicName:s,basename:t})}},28354:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});var i=s(85893),a=s(47615);const n=({renderSchema:e,basename:t,topicName:s})=>(0,i.jsx)(a.G,{renderSchema:e,basename:t,topicName:s})},7878:(e,t,s)=>{s(85893),s(71236),s(28188),s(73685),s(180)},91635:(e,t,s)=>{s.d(t,{D:()=>d,t:()=>l});var i=s(85893),a=s(93264),n=s(28188),r=s(79141);const o=({variant:e,hideModal:t,title:s})=>(0,i.jsx)(n.Modal,{id:"fallback-modal",variant:e,isOpen:!0,"aria-label":"fallback modal",showClose:!0,"aria-describedby":"modal-message",onClose:t,title:s,children:(0,i.jsx)(r.Loading,{bullseyeProps:{className:"pf-u-p-xl"}})}),c=({activeModal:e,hideModal:t,modalRegistry:s})=>{if(void 0===e)return(0,i.jsx)(i.Fragment,{});const n=s.current[e.modalType],r=n.lazyComponent;return(0,i.jsx)(a.Suspense,Object.assign({fallback:(0,i.jsx)(o,{hideModal:t,variant:n.variant,title:n.title})},{children:(0,i.jsx)(r,Object.assign({hideModal:t,title:n.title,variant:n.variant},e.modalProps))}))},l=(0,a.createContext)(void 0),d=({children:e})=>{const[t,s]=(0,a.useState)(),n=(0,a.useRef)({}),r={registerModals:e=>{n.current=Object.assign(Object.assign({},n),e)},hideModal:()=>{s(void 0)},showModal:(e,t)=>{s({modalType:e,modalProps:t})}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{activeModal:t,hideModal:r.hideModal,modalRegistry:n}),(0,i.jsx)(l.Provider,Object.assign({value:r},{children:e}))]})}},22931:(e,t,s)=>{var i;s.d(t,{w:()=>i}),function(e){e.CreateServiceRegistry="CreateServiceRegistry",e.DeleteServiceRegistry="DeleteServiceRegistry"}(i||(i={}))},90806:(e,t,s)=>{s.d(t,{d:()=>n});var i=s(93264),a=s(91635);const n=()=>{const e=(0,i.useContext)(a.t);if(void 0===e)throw new Error("not inside modal provider");return e}},180:(e,t,s)=>{s.d(t,{a$:()=>m.a,AX:()=>r.A,D5:()=>h.D,C0:()=>o.C,jU:()=>o.j,yR:()=>u.y,wu:()=>v.wu,wR:()=>g.w,L5:()=>p.L,DY:()=>j.DY,w8:()=>j.w8,bN:()=>v.bN,r3:()=>j.r3,dd:()=>j.dd,h0:()=>v.h0});var i=s(85893),a=s(93264);s(50834);var n=s(28188);var r=s(5956),o=s(15825),c=s(73685),l=s(71236);s(62426);class d extends a.Component{constructor(){super(...arguments),this.state={hasError:!1},this.onClickButton=()=>{const{history:e}=this.props;this.setState({hasError:!1}),e&&e.push("/")}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("error:",e,t)}render(){const{t:e}=this.props,{hasError:t}=this.state;return t?(0,i.jsx)(n.PageSection,Object.assign({padding:{default:"noPadding"},isFilled:!0},{children:(0,i.jsx)(o.C,Object.assign({emptyStateProps:{variant:o.j.UnexpectedError},emptyStateIconProps:{className:"icon-color"},titleProps:{title:e("common:something_went_wrong")},emptyStateBodyProps:{body:e("unexpected_error")}},{children:(0,i.jsx)(n.Button,Object.assign({onClick:this.onClickButton},{children:e("common:go_to_kafka_instances")}))}))})):this.props.children}}(0,c.withRouter)((0,l.withTranslation)()(d));var u=s(22336),h=s(78834),v=s(73251),g=s(76506),p=s(58883),m=(s(7878),s(93262)),j=s(45094)},11551:(e,t,s)=>{s.d(t,{G:()=>i,S:()=>a});const i=e=>{var t;return void 0!==(null===(t=e.response)||void 0===t?void 0:t.data.code)};var a;!function(e){e.USER_ALREADY_HAVE_TRIAL_INSTANCE="SRS-MGMT-13",e.INSUFFICIENT_QUOTA="SRS-MGMT-14",e.INSUFFICIENT_STANDARD_QUOTA="SRS-MGMT-7",e.FAILED_TO_CHECK_QUOTA="SRS-MGMT-11"}(a||(a={}))},31973:(e,t,s)=>{s(93264)}}]);
//# sourceMappingURL=9685.85ef350b.js.map