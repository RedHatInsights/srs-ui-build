"use strict";(self.webpackChunksrs_ui=self.webpackChunksrs_ui||[]).push([[961],{71143:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(75418),a=n.n(r),i=n(69020),o=n(70655),s=n(84669),l=n(98502),u=n(9980),c=n(18271),d=n(33494);var f=n(75381),v=n(31151),g=function(){var e=(0,i.useTranslation)().t,t=(0,u.useAuth)(),n=((0,u.useConfig)()||{srs:{apiBasePath:""}}).srs.apiBasePath,g=(0,d.QK)().showModal,E=(0,v.x)()||{},m=E.preCreateInstance,h=E.shouldOpenCreateModal,_=E.renderDownloadArtifacts,p=(0,d.h0)()||{},R=p.page,w=void 0===R?1:R,C=p.perPage,y=void 0===C?10:C,S=(0,r.useState)(!1),P=S[0],I=S[1],k=(0,r.useState)(void 0),D=k[0],b=k[1],T=(0,r.useState)(!1),U=T[0],A=(T[1],(0,r.useState)(void 0)),O=A[0],B=A[1],M=(0,r.useState)(void 0),x=M[0],N=M[1],V=(0,r.useState)(void 0),G=V[0],L=V[1],Y=(0,r.useState)("name asc"),q=Y[0],F=Y[1],K=null==x?void 0:x.some((function(e){return(null==e?void 0:e.instance_type)===(null===f.ik||void 0===f.ik?void 0:f.ik.eval)&&e.owner===G}));(0,r.useEffect)((function(){z()}),[]),(0,r.useEffect)((function(){null==t||t.getUsername().then((function(e){return L(e)}))}),[t]),(0,r.useEffect)((function(){j()}),[x]),(0,r.useEffect)((function(){(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return(e=h)?[4,h()]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return e&&X(),[2]}}))}))}),[h]),(0,r.useEffect)((function(){z()}),[w,y]);var Q,W,Z,j=function(){if(x&&(null==x?void 0:x.length)>0){var e=null==x?void 0:x.filter((function(e){return(null==e?void 0:e.id)===(null==D?void 0:D.id)}))[0],t=(0,o.__assign)((0,o.__assign)({},D),e);e&&b(t)}},z=function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,null==t?void 0:t.srs.getToken()];case 1:return e=r.sent(),n&&e?[4,new l.RegistriesApi(new l.Configuration({accessToken:e,basePath:n})).getRegistries(w,y).then((function(e){var t=null==e?void 0:e.data;B(t),N(null==t?void 0:t.items)})).catch((function(e){}))]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))};Q=function(){return z()},W=5e3,Z=(0,r.useRef)(),(0,r.useEffect)((function(){Z.current=Q}),[Q]),(0,r.useEffect)((function(){if(null!==W){var e=setTimeout((function(){Z.current()}),W);return function(){clearInterval(e)}}}),[Q,W]);var H=function(e){I(!0),b(e)},J=function(t){var n=(t||{}).status;g(d.Ny.DELETE_SERVICE_REGISTRY,{serviceRegistryStatus:n,selectedItemData:t,fetchRegistries:z,title:"".concat(e("common.delete_service_registry_title"),"?"),confirmButtonProps:{label:e("common.delete")},renderDownloadArtifacts:_})},X=function(){g(d.Ny.CREATE_SERVICE_REGISTRY,{fetchServiceRegistries:z,hasUserTrialInstance:K})},$=function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return m?[4,m(!0)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return e&&X(),[2]}}))}))};return void 0===x?a().createElement(s.PageSection,{variant:s.PageSectionVariants.light,padding:{default:"noPadding"}},a().createElement(d.yR,null)):(null==x?void 0:x.length)?a().createElement(c.OP,{isExpanded:P,isLoading:void 0===D,notRequiredDrawerContentBackground:U,onClose:function(){I(!1)},registry:D},a().createElement("main",{className:"pf-c-page__main"},a().createElement(c.mt,{onConnectToRegistry:H,onDeleteRegistry:J,serviceRegistryDetails:D}),a().createElement(c.UW,{page:w,perPage:y,serviceRegistryItems:x,total:null==O?void 0:O.total,onViewConnection:H,onDelete:J,expectedTotal:0,orderBy:q,setOrderBy:F,loggedInUser:G,currentUserRegistries:x,handleCreateModal:$,refresh:z,registryDataLoaded:!1,isDrawerOpen:P}))):a().createElement(a().Fragment,null,a().createElement(c.mt,null),a().createElement(c.EG,{onCreateserviceRegistry:$}))},E=n(78800);const m=function(e){var t=e.preCreateInstance,n=e.shouldOpenCreateModal,r=e.tokenEndPointUrl,o=e.renderDownloadArtifacts;return a().createElement(i.I18nextProvider,{i18n:E.Z},a().createElement(v.w.Provider,{value:{preCreateInstance:t,shouldOpenCreateModal:n,tokenEndPointUrl:r,renderDownloadArtifacts:o}},a().createElement(d.OU,null,a().createElement(d.bN,null,a().createElement(g,null)))))}}}]);
//# sourceMappingURL=961.fb06d8d4.js.map