"use strict";(self.webpackChunksrs_ui=self.webpackChunksrs_ui||[]).push([[630],{71143:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(75418),i=n.n(r),a=n(11593),s=n(70655),o=n(84669),l=n(49480),u=n(46332),c=n(18271),d=n(33494);var f=n(75381),v=n(31151),g=function(){var e=(0,a.useTranslation)().t,t=(0,u.useAuth)(),n=((0,u.useConfig)()||{srs:{apiBasePath:""}}).srs.apiBasePath,g=(((0,u.useAlert)()||{}).addAlert,(0,d.QK)().showModal),m=(0,v.x)()||{},E=m.preCreateInstance,_=m.shouldOpenCreateModal,h=(m.tokenEndPointUrl,(0,d.h0)()||{}),p=h.page,R=void 0===p?1:p,C=h.perPage,y=void 0===C?10:C,S=(0,r.useState)(!1),P=S[0],w=S[1],k=(0,r.useState)(void 0),I=k[0],T=k[1],b=(0,r.useState)(!1),U=b[0],D=(b[1],(0,r.useState)(!1)),A=D[0],O=(D[1],(0,r.useState)(void 0)),B=O[0],x=O[1],M=(0,r.useState)(void 0),N=M[0],V=M[1],G=(0,r.useState)(void 0),L=G[0],Y=G[1],q=(0,r.useState)("name asc"),F=q[0],K=q[1],Q=null==N?void 0:N.some((function(e){return(null==e?void 0:e.instance_type)===(null===f.ik||void 0===f.ik?void 0:f.ik.eval)}));(0,r.useEffect)((function(){H()}),[]),(0,r.useEffect)((function(){null==t||t.getUsername().then((function(e){return Y(e)}))}),[t]),(0,r.useEffect)((function(){z()}),[N]),(0,r.useEffect)((function(){(0,s.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return(e=_)?[4,_()]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return e&&$(),[2]}}))}))}),[_]);var W,Z,j,z=function(){if(N&&(null==N?void 0:N.length)>0){var e=null==N?void 0:N.filter((function(e){return(null==e?void 0:e.id)===(null==I?void 0:I.id)}))[0],t=(0,s.__assign)((0,s.__assign)({},I),e);e&&T(t)}},H=function(){return(0,s.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,null==t?void 0:t.srs.getToken()];case 1:return e=r.sent(),n&&e?[4,new l.RegistriesApi(new l.Configuration({accessToken:e,basePath:n})).getRegistries().then((function(e){var t=null==e?void 0:e.data;x(t),V(null==t?void 0:t.items)})).catch((function(e){}))]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))};W=function(){return H()},Z=5e3,j=(0,r.useRef)(),(0,r.useEffect)((function(){j.current=W}),[W]),(0,r.useEffect)((function(){if(null!==Z){var e=setTimeout((function(){j.current()}),Z);return function(){clearInterval(e)}}}),[W,Z]);var J=function(e){w(!0),T(e)},X=function(t){var n=t||{},r=n.name,i=n.status;g(d.Ny.DELETE_SERVICE_REGISTRY,{serviceRegistryStatus:i,selectedItemData:t,fetchRegistries:H,title:e("common.delete_service_registry_title")+"?",confirmButtonProps:{label:e("common.delete")},textProps:{description:e("common.delete_service_registry_description",{name:r})}})},$=function(){g(d.Ny.CREATE_SERVICE_REGISTRY,{fetchServiceRegistries:H,hasUserTrialInstance:Q})},ee=function(){return(0,s.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return E?[4,E(!0)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return e&&$(),[2]}}))}))};return A?i().createElement(c.nA,{getAccessToServiceRegistry:function(){}}):void 0===N?i().createElement(o.PageSection,{variant:o.PageSectionVariants.light,padding:{default:"noPadding"}},i().createElement(d.yR,null)):(null==N?void 0:N.length)?i().createElement(c.OP,{isExpanded:P,isLoading:void 0===I,notRequiredDrawerContentBackground:U,onClose:function(){w(!1)},registry:I},i().createElement("main",{className:"pf-c-page__main"},i().createElement(c.mt,{onConnectToRegistry:J,onDeleteRegistry:X,serviceRegistryDetails:I}),i().createElement(c.UW,{page:R,perPage:y,serviceRegistryItems:N,total:null==B?void 0:B.total,onViewConnection:J,onDelete:X,expectedTotal:0,orderBy:F,setOrderBy:K,loggedInUser:L,currentUserRegistries:N,handleCreateModal:ee,refresh:H,registryDataLoaded:!1,isDrawerOpen:P}))):i().createElement(i().Fragment,null,i().createElement(c.mt,null),i().createElement(c.EG,{onCreateserviceRegistry:ee}))},m=n(78800);const E=function(e){var t=e.preCreateInstance,n=e.shouldOpenCreateModal,r=e.tokenEndPointUrl;return i().createElement(a.I18nextProvider,{i18n:m.Z},i().createElement(v.w.Provider,{value:{preCreateInstance:t,shouldOpenCreateModal:n,tokenEndPointUrl:r}},i().createElement(d.OU,null,i().createElement(d.bN,null,i().createElement(g,null)))))}}}]);
//# sourceMappingURL=630.4238a00c.js.map