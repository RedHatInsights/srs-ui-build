"use strict";(self.webpackChunksrs_ui=self.webpackChunksrs_ui||[]).push([[320],{7364:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var r=n(5418),a=n.n(r),i=n(1593),o=n(655),s=n(8068),l=n(4669),c=n(2979),u=n(5216),d=n(6280),v=n(3494);var m=a().createContext(void 0),f=function(){var e=(0,i.useTranslation)().t,t=(0,u.useAuth)(),n=(0,u.useConfig)().srs.apiBasePath,f=((0,u.useBasename)(),(0,u.useAlert)().addAlert),g=(0,v.QK)().showModal,p=(0,r.useContext)(m)||{},_=p.preCreateInstance,h=p.shouldOpenCreateModal,E=(0,s.useLocation)(),y=new URLSearchParams(E.search),w=parseInt(y.get("page")||"",10)||1,C=parseInt(y.get("perPage")||"",10)||10,R=(0,r.useState)(!1),S=R[0],b=R[1],P=(0,r.useState)(void 0),k=P[0],D=P[1],T=(0,r.useState)(!1),x=T[0],I=(T[1],(0,r.useState)(!1)),L=I[0],U=(I[1],(0,r.useState)(void 0)),A=U[0],B=U[1],O=(0,r.useState)(void 0),N=O[0],M=O[1],F=(0,r.useState)(void 0),V=F[0],j=F[1],z=(0,r.useState)("name asc"),q=z[0],G=z[1];(0,r.useEffect)((function(){Z()}),[]),(0,r.useEffect)((function(){null==t||t.getUsername().then((function(e){return j(e)}))}),[t]),(0,r.useEffect)((function(){Y()}),[N]),(0,r.useEffect)((function(){(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return(e=h)?[4,h()]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return e&&$(),[2]}}))}))}),[h]);var H,K,Q,Y=function(){if(N&&(null==N?void 0:N.length)>0){var e=null==N?void 0:N.filter((function(e){return(null==e?void 0:e.id)===(null==k?void 0:k.id)}))[0],t=(0,o.__assign)((0,o.__assign)({},k),e);e&&D(t)}},Z=function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,null==t?void 0:t.srs.getToken()];case 1:return e=r.sent(),[4,new c.RegistriesApi(new c.Configuration({accessToken:e,basePath:n})).getRegistries().then((function(e){var t=null==e?void 0:e.data;B(t),M(null==t?void 0:t.items)})).catch((function(e){}))];case 2:return r.sent(),[2]}}))}))};H=function(){return Z()},K=5e3,Q=(0,r.useRef)(),(0,r.useEffect)((function(){Q.current=H}),[H]),(0,r.useEffect)((function(){if(null!==K){var e=setTimeout((function(){Q.current()}),K);return function(){clearInterval(e)}}}),[H,K]);var W=function(e){b(!0),D(e)},X=function(n){var r=n||{},i=r.name,c=r.status,u=r.registryUrl;g(v.Ny.DELETE_SERVICE_REGISTRY,{serviceRegistryStatus:c,selectedItemData:n,fetchRegistries:Z,title:e("common.delete_service_registry_title")+"?",confirmButtonProps:{label:e("common.delete")},textProps:{descriptionHTML:a().createElement(a().Fragment,null,a().createElement(l.Text,{className:"mas--delete-item__modal--text"},a().createElement("span",{dangerouslySetInnerHTML:{__html:e("common.delete_service_registry_description",{name:i})}})),a().createElement(l.Text,{className:"mas--delete-item__modal--text"},e("common.delete_service_registry_download_zip"),"Â ",a().createElement(s.Link,{onClick:function(){return function(n,r){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var a;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,null==t?void 0:t.apicurio_registry.getToken()];case 1:return a=i.sent(),fetch(n+"/apis/registry/v2/admin/export",{headers:new Headers({Authorization:"Bearer "+a||0})}).then((function(e){return e.blob()})).then((function(e){var t=document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=r+".zip",t.click()})).catch((function(t){var n,r;f({title:e("something_went_wrong"),variant:l.AlertVariant.danger,description:null===(r=null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.reason})})),[2]}}))}))}(u,i)},to:"#"},e("common.delete_service_registry_download_zip_link"))))}})},$=function(){g(v.Ny.CREATE_SERVICE_REGISTRY,{fetchServiceRegistries:Z})},J=function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return _?[4,_(!0)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return e&&$(),[2]}}))}))};return L?a().createElement(d.nA,{getAccessToServiceRegistry:function(){}}):void 0===N?a().createElement(l.PageSection,{variant:l.PageSectionVariants.light,padding:{default:"noPadding"}},a().createElement(v.yR,null)):(null==N?void 0:N.length)?a().createElement(d.OP,{isExpanded:S,isLoading:void 0===k,notRequiredDrawerContentBackground:x,onClose:function(){b(!1)},registry:k},a().createElement("main",{className:"pf-c-page__main"},a().createElement(d.mt,{onConnectToRegistry:W,onDeleteRegistry:X,serviceRegistryDetails:k}),a().createElement(d.UW,{page:w,perPage:C,serviceRegistryItems:N,total:null==A?void 0:A.total,onViewConnection:W,onDelete:X,expectedTotal:0,orderBy:q,setOrderBy:G,loggedInUser:V,currentUserRegistries:N,handleCreateModal:J,refresh:Z,registryDataLoaded:!1,isDrawerOpen:S}))):a().createElement(a().Fragment,null,a().createElement(d.mt,null),a().createElement(d.EG,{onCreateserviceRegistry:J}))},g=n(8800);const p=function(e){var t=e.preCreateInstance,n=e.shouldOpenCreateModal;return a().createElement(i.I18nextProvider,{i18n:g.Z},a().createElement(m.Provider,{value:{preCreateInstance:t,shouldOpenCreateModal:n}},a().createElement(v.OU,null,a().createElement(f,null))))}},2247:(e,t,n)=>{n(5418),n(1593),n(4669),n(8068),n(3494)},3494:(e,t,n)=>{n.d(t,{a$:()=>_.a,AX:()=>o.A,D5:()=>m.D,C0:()=>s.C,jU:()=>s.j,yR:()=>v.y,wu:()=>f.w,wR:()=>g.w,L5:()=>p.L,Ny:()=>h.Ny,OU:()=>h.OU,QK:()=>h.QK});var r=n(5418),a=n.n(r),i=(n(5216),n(4669)),o=n(9441),s=n(1098),l=n(655),c=n(8068),u=n(1593),d=(n(7502),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t.onClickButton=function(){var e=t.props.history;t.setState({hasError:!1}),e&&e.push("/")},t}return(0,l.__extends)(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0}},t.prototype.componentDidCatch=function(e,t){console.error("error:",e,t)},t.prototype.render=function(){var e=this.props.t;return this.state.hasError?a().createElement(i.PageSection,{padding:{default:"noPadding"},isFilled:!0},a().createElement(s.C,{emptyStateProps:{variant:s.j.UnexpectedError},emptyStateIconProps:{className:"icon-color"},titleProps:{title:e("common.something_went_wrong")},emptyStateBodyProps:{body:e("unexpected_error")}},a().createElement(i.Button,{onClick:this.onClickButton},e("common.go_to_kafka_instances")))):this.props.children},t}(r.Component)),v=((0,c.withRouter)((0,u.withTranslation)()(d)),n(6554)),m=n(3242),f=n(6376),g=n(2067),p=n(5642),_=(n(2247),n(2311)),h=n(9758)},2519:(e,t,n)=>{n(5418)},2648:(e,t,n)=>{n.d(t,{wx:()=>a,xe:()=>i,YZ:()=>o,hm:()=>s,L0:()=>l});var r=n(4683);var a=function(){return document.querySelector("#qs-content")||document.body},i=32,o=255,s=[{value:"ready",label:"Ready"},{value:"failed",label:"Failed"},{value:"accepted",label:"Creation pending"},{value:"provisioning",label:"Creation in progress"},{value:"preparing",label:"Creation in progress"},{value:"deprovision",label:"Deletion in progress"},{value:"deleting",label:"Deletion in progress"}],l=function(e,t){return e="string"==typeof e?new Date(e):e,(0,r.formatDistance)(e,new Date)+" "+t}}}]);
//# sourceMappingURL=320.7ca8e783.js.map